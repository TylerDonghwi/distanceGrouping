const maxWeight = 10000;
const n = 10; // number of technicians
const numIterations = 1000;

const colors = [
  "",
  "lightgray",
  "black",
  "red",
  "orange",
  "yellow",
  "green",
  "blue",
  "purple",
  "pink",
  "cyan",
  "brown",
  "olive",
  "yellowGreen",
  "peachPuff",
  "salmon",
  "khaki",
  "thistle",
];
const tests = [
  // test coordinates, the third value is the weight of the job randomly assigned
  [
    [-36.9020038, 174.7578935, 1],
    [-36.8818618, 174.750201, 1],
    [-36.7942876, 174.6605501, 1],
    [-36.902283, 174.8396365, 1],
    [-36.8948571, 174.8153186, 1],
    [-36.8720438, 174.609816, 1],
    [-36.8720438, 174.609816, 1],
    [-36.880712, 174.7513683, 1],
    [-36.812286, 174.6346072, 2],
    [-36.8230079, 174.6352204, 2],
    [-36.9201965, 174.7860347, 2],
    [-36.9237037, 174.7949032, 2],
    [-36.9683935, 174.8324668, 2],
    [-36.903619, 174.7634011, 2],
    [-36.9232304, 174.8302906, 2],
    [-36.9255603, 174.7847758, 2],
    [-36.8681201, 174.6987089, 2],
    [-36.9985805, 174.8727487, 3],
    [-36.895712, 174.6255309, 3],
    [-37.0517898, 174.8631455, 3],
    [-36.9232304, 174.8302906, 3],
    [-36.8953169, 174.68107, 4],
    [-36.868632, 174.7113698, 4],
    [-36.8882769, 174.6735535, 4],
    [-36.7255477, 174.7449787, 4],
    [-36.9032209, 174.6574038, 4],
    [-36.9224744, 174.7511624, 4],
    [-36.9120967, 174.7494903, 3],
  ],
  // random 1000 coordinates all across the world
  [
    [-17.7226202, 76.3488277, 4],
    [-87.605562, 314.1188218, 3],
    [39.6013977, 48.546056, 3],
    [87.9407583, 317.2796903, 3],
    [-47.2154536, 200.4976585, 2],
    [13.6342154, 220.5314156, 3],
    [7.9448243, 15.4956235, 4],
    [3.027664, 338.7562027, 4],
    [-73.8852838, 333.4224912, 2],
    [64.8822818, 251.8884433, 2],
    [-56.0945846, 357.9647263, 4],
    [-85.6183545, 166.0265359, 4],
    [8.4592153, 173.1689526, 3],
    [-5.0304399, 39.8930698, 3],
    [-35.8436283, 338.5952943, 2],
    [-77.0163798, 78.2878998, 4],
    [64.3941954, 274.7681078, 2],
    [-58.1537525, 149.378834, 1],
    [31.1403774, 35.3654071, 2],
    [5.0774836, 350.9329754, 4],
    [86.3522356, 154.7716268, 1],
    [30.7475344, 50.0102262, 4],
    [62.2265462, 154.7212503, 3],
    [-19.674656, 62.7118412, 2],
    [-10.4206342, 316.2787892, 3],
    [-8.6269689, 143.513057, 3],
    [-15.1971458, 203.7765325, 4],
    [-43.0696234, 242.1358042, 2],
    [55.361054, 17.8047925, 4],
    [48.537129, 32.9492512, 4],
    [-43.4985302, 239.4675856, 2],
    [-62.6038149, 127.2106162, 3],
    [-83.217599, 215.4405816, 4],
    [-34.4050147, 15.8578864, 2],
    [65.1417304, 221.0839417, 1],
    [-2.2641511, 175.0234954, 4],
    [-85.3718013, 185.0473297, 2],
    [-79.9218474, 101.6738855, 3],
    [-54.2913248, 196.2637626, 1],
    [69.7872899, 199.3140255, 3],
    [-89.2123923, 117.2100857, 4],
    [-25.0559311, 107.7424434, 4],
    [75.3968594, 199.118553, 2],
    [-86.4563135, 261.3525994, 3],
    [14.1496762, 149.8361952, 2],
    [26.5125544, 85.5978192, 3],
    [46.3567995, 332.1662934, 1],
    [-27.645922, 72.9236615, 1],
    [72.7813332, 10.0696462, 1],
    [-2.3743887, 129.3241955, 4],
    [0.9713033, 51.6183394, 3],
    [45.6370648, 41.2583572, 3],
    [8.509752, 228.8567403, 3],
    [42.7368961, 116.0469546, 1],
    [-60.3890508, 340.1955939, 1],
    [-77.1060659, 195.1445932, 1],
    [-19.9835135, 292.3317505, 1],
    [6.2641057, 115.4074673, 3],
    [-4.9976096, 353.3240964, 2],
    [5.2766139, 122.4681033, 1],
    [38.8338367, 311.7191433, 1],
    [-9.1161043, 309.5488391, 3],
    [-38.2139861, 130.6827022, 1],
    [62.5498123, 66.8978969, 4],
    [16.8477764, 197.9646597, 1],
    [-71.7949974, 120.7684679, 2],
    [-66.5276012, 53.1570646, 3],
    [-22.8329632, 295.4980333, 3],
    [-40.3549672, 42.8891222, 2],
    [-88.7437293, 73.928906, 1],
    [32.7699361, 341.6590736, 4],
    [81.304662, 293.6164753, 2],
    [-49.0537905, 349.6041663, 4],
    [-57.7927814, 218.3821668, 3],
    [-48.8852106, 349.7389606, 1],
    [-71.8460124, 202.682498, 4],
    [-26.6358112, 11.8279681, 3],
    [-13.6797193, 171.4200074, 3],
    [-47.7737294, 121.3498722, 4],
    [-87.5667932, 229.3972058, 2],
    [-15.6783552, 302.0020054, 2],
    [83.7066238, 99.8645198, 3],
    [-14.9211158, 180.0009169, 2],
    [-88.597358, 58.1483367, 4],
    [-83.5582788, 212.4396352, 2],
    [72.2207969, 6.6323745, 3],
    [-13.1199115, 249.4831386, 3],
    [-38.2616417, 267.2618853, 1],
    [-22.4808212, 192.04462, 1],
    [-18.6575152, 146.6565863, 4],
    [68.8846514, 344.2184378, 4],
    [57.9460128, 173.8404203, 4],
    [-7.6382448, 190.1593497, 3],
    [21.818176, 177.4005874, 1],
    [-10.6636883, 120.5170666, 4],
    [87.1896767, 192.7777295, 4],
    [-76.627005, 138.9148347, 1],
    [-49.4427591, 106.3026063, 2],
    [-18.0788945, 180.7388617, 1],
    [34.8067278, 203.3913956, 2],
    [36.6120325, 192.9091273, 2],
    [-9.6756579, 201.4771422, 2],
    [67.8067603, 161.5698305, 1],
    [42.063086, 172.02212, 3],
    [-52.0344709, 180.1863435, 3],
    [19.8665121, 14.579892, 3],
    [68.9311482, 92.9078202, 4],
    [-58.1074254, 36.3331994, 3],
    [-5.817413, 15.1995402, 3],
    [23.7598923, 309.026181, 1],
    [-27.4822005, 273.0740142, 1],
    [76.0817618, 107.2964548, 2],
    [-47.8043655, 197.4633627, 2],
    [-20.0160917, 153.1745365, 2],
    [76.1521378, 57.9511907, 3],
    [-36.6688243, 303.9831639, 1],
    [53.6828498, 81.7457813, 2],
    [-51.6985635, 205.7436138, 4],
    [-28.7375487, 185.3191519, 4],
    [16.9726319, 194.2141173, 3],
    [21.7143829, 101.1788188, 1],
    [-39.2009992, 55.4442387, 1],
    [-36.0407083, 153.6556883, 2],
    [-63.8704327, 288.5691141, 1],
    [23.444251, 53.8544071, 4],
    [89.0103745, 146.4160539, 2],
    [-87.2734546, 270.6431967, 3],
    [34.4505904, 124.0637314, 4],
    [22.0523334, 97.1224085, 4],
    [-15.8379774, 288.5155372, 2],
    [-71.4052178, 287.9798411, 4],
    [86.6314419, 106.5452531, 2],
    [-86.5774964, 16.9829101, 3],
    [32.1918994, 207.6963455, 1],
    [-30.9417952, 78.7168025, 3],
    [20.5546528, 334.4219354, 2],
    [-24.3519953, 113.2602236, 3],
    [-70.721186, 21.6448914, 2],
    [19.7095784, 72.6360147, 4],
    [-86.4243274, 339.1067576, 2],
    [-32.4990862, 181.4806114, 1],
    [-5.4946678, 289.9905526, 3],
    [16.5097029, 148.045934, 1],
    [9.1611352, 125.5419692, 4],
    [-75.9034746, 216.4982749, 2],
    [2.6226938, 143.5358881, 4],
    [-48.0455376, 198.7386958, 1],
    [-42.2116878, 351.3669226, 1],
    [-70.003319, 197.9442179, 4],
    [74.3649024, 162.2583831, 4],
    [32.6572516, 92.6806228, 1],
    [86.5327948, 194.4322715, 3],
    [-58.3835974, 292.3992941, 4],
    [19.9272395, 66.92396, 1],
    [20.8238467, 107.8185349, 1],
    [-59.0694672, 176.823685, 2],
    [39.4897889, 329.0974376, 4],
    [8.9978816, 325.347088, 3],
    [-59.2192413, 75.1123884, 1],
    [-12.0925503, 94.6112205, 2],
    [73.4488524, 76.0985199, 4],
    [-29.6723414, 203.223169, 2],
    [-29.64127, 185.5261073, 1],
    [-26.0283726, 57.7878394, 4],
    [1.1320277, 126.5750802, 2],
    [19.9477303, 42.2082644, 2],
    [49.8843809, 38.7773455, 2],
    [82.7957503, 315.5860672, 3],
    [58.5243762, 131.435028, 2],
    [38.0728785, 288.2315614, 4],
    [-18.1137868, 272.7023935, 4],
    [47.1070773, 299.066262, 4],
    [-71.5944667, 263.066572, 3],
    [80.0376083, 233.3969014, 3],
    [-64.5015034, 34.7612007, 4],
    [88.940829, 171.0818234, 2],
    [-56.9646644, 133.5229019, 4],
    [9.3897525, 21.8681357, 1],
    [41.7689597, 14.5046404, 3],
    [85.8756488, 205.6747413, 1],
    [-86.8201977, 263.1700524, 2],
    [38.7240907, 257.3178946, 2],
    [62.1939304, 327.7774169, 1],
    [-45.2588048, 37.6099834, 3],
    [11.803527, 134.8641944, 3],
    [-69.0625715, 98.3116711, 2],
    [35.3843369, 306.6667845, 1],
    [48.2810093, 186.6804713, 3],
    [3.9512924, 134.2171506, 4],
    [-63.6573451, 197.6743146, 2],
    [46.631517, 231.7769385, 2],
    [-64.5018927, 266.6018324, 4],
    [65.6952287, 71.2393428, 4],
    [-0.6510353, 146.0909925, 2],
    [38.9264628, 277.5915106, 2],
    [72.0467614, 335.9324465, 2],
    [19.5559862, 205.7724449, 2],
    [18.3715936, 184.3842426, 4],
    [-9.4696527, 347.2556568, 2],
    [-2.7029624, 234.7722749, 4],
    [-60.0762164, 296.7187966, 2],
    [63.5552913, 97.6718403, 2],
    [23.9766678, 302.6512449, 2],
    [-46.0611514, 62.1292519, 2],
    [-63.0912974, 55.0648239, 1],
    [70.904836, 130.3176625, 3],
    [22.7495629, 44.81689, 2],
    [-49.791426, 136.8948899, 1],
    [11.8568873, 131.1077828, 3],
    [65.2494555, 43.4130023, 2],
    [-8.3318607, 32.505677, 3],
    [-0.0288873, 233.1326485, 4],
    [-44.2162554, 353.5610025, 2],
    [-64.565266, 303.4795758, 4],
    [61.8395695, 300.4724619, 1],
    [-87.7081727, 42.9846604, 1],
    [57.5980949, 200.8441259, 3],
    [26.8518639, 206.5917023, 1],
    [70.758442, 206.8721466, 2],
    [20.0508707, 99.3871994, 2],
    [68.7456781, 188.7494111, 2],
    [26.5196756, 240.3086479, 4],
    [26.5986911, 175.7886768, 2],
    [61.5537127, 281.5099102, 4],
    [59.8709496, 26.3744337, 1],
    [11.1099358, 264.0828809, 4],
    [18.5968876, 304.2454425, 4],
    [-38.6330694, 334.426373, 3],
    [49.8666588, 219.5180282, 4],
    [-22.0924508, 146.6964857, 3],
    [49.8715609, 235.9296796, 4],
    [-70.6355789, 83.5393931, 3],
    [75.1839575, 223.1725261, 4],
    [37.0561302, 76.277153, 3],
    [-69.0625549, 80.5796375, 3],
    [-11.4844909, 236.8232845, 1],
    [51.9371853, 88.5515995, 2],
    [6.4168514, 313.1981166, 2],
    [9.3739993, 143.4709177, 3],
    [-15.1838642, 305.6969021, 4],
    [60.600371, 286.1417017, 4],
    [35.3915878, 164.7069119, 1],
    [0.0936192, 344.7241319, 4],
    [-0.2211579, 262.2990569, 4],
    [64.0314466, 319.2285742, 1],
    [12.3035378, 77.7041652, 2],
    [87.9147547, 162.2756949, 1],
    [-83.9239734, 15.8035818, 1],
    [37.3643454, 129.3601038, 4],
    [15.1768829, 187.6152361, 4],
    [9.6510986, 336.8961221, 3],
    [-21.1005473, 148.9480339, 1],
    [48.244649, 321.6252314, 4],
    [66.3879733, 206.997774, 1],
    [76.8914073, 319.8029241, 2],
    [4.0102689, 64.4097027, 3],
    [15.4559832, 17.7750697, 1],
    [49.7694348, 309.0555843, 2],
    [56.304252, 308.6027954, 2],
    [-54.585964, 246.352477, 3],
    [-36.3377243, 84.5488872, 3],
    [-63.6789568, 204.0157338, 2],
    [-16.6459671, 278.6940429, 4],
    [17.1375698, 88.4251511, 1],
    [-89.3992038, 335.4535794, 3],
    [56.837286, 312.7110971, 1],
    [34.2063894, 42.9082004, 3],
    [5.5620917, 144.3264225, 4],
    [-34.4103858, 335.4446237, 2],
    [41.9599427, 80.3393631, 3],
    [-41.8638331, 210.1540946, 1],
    [61.4997581, 309.3951375, 1],
    [-1.0008177, 37.3427551, 2],
    [-77.070884, 344.4562588, 4],
    [76.2777749, 327.6601948, 4],
    [-0.2994971, 202.4025839, 3],
    [-44.533461, 87.5269594, 1],
    [47.4953303, 189.5031915, 3],
    [46.966037, 188.3132155, 1],
    [85.1982504, 102.5203178, 3],
    [-64.6610234, 2.4023441, 4],
    [-66.98918, 138.2515045, 4],
    [-35.0586393, 150.3180723, 2],
    [-80.1590592, 248.3113063, 1],
    [-9.2488406, 281.4808287, 3],
    [10.4281891, 21.4467748, 3],
    [-13.6408363, 237.122526, 2],
    [25.7853519, 257.6985904, 4],
    [14.4483802, 9.873123, 1],
    [86.2803952, 162.6304298, 4],
    [63.2217147, 185.0160964, 2],
    [13.4951666, 188.2489459, 4],
    [84.1033803, 133.279492, 3],
    [49.9768733, 76.6320184, 2],
    [1.6574963, 69.3288338, 1],
    [-12.4828448, 48.5779957, 1],
    [-11.9123689, 42.6751635, 3],
    [14.4170883, 261.0795155, 1],
    [8.6369495, 352.8125931, 3],
    [-7.826898, 321.0426098, 3],
    [-78.1334704, 109.1955166, 4],
    [-67.6816661, 2.7165821, 4],
    [35.0692686, 251.6812816, 2],
    [48.0691144, 135.2020795, 2],
    [88.3215556, 93.4891007, 2],
    [-43.1633858, 122.2825299, 1],
    [75.3422351, 339.8804718, 3],
    [-17.7584742, 266.518206, 1],
    [-6.9228482, 115.3885052, 4],
    [-43.9509587, 63.3956112, 4],
    [-33.3293939, 146.3983551, 1],
    [-86.2223272, 170.8896413, 3],
    [26.1675317, 80.9967091, 3],
    [17.4916302, 17.7482508, 3],
    [-2.9376851, 202.9121765, 3],
    [-20.8573664, 231.1495305, 3],
    [56.9502482, 86.125494, 1],
    [-43.6294282, 17.9193221, 1],
    [-72.2882984, 305.1928908, 3],
    [64.7758549, 74.8802938, 2],
    [59.7712379, 123.3139357, 1],
    [-60.4477761, 151.5707424, 3],
    [16.8731399, 209.11882, 3],
    [-79.8014421, 316.9260531, 3],
    [38.6318536, 287.2511934, 2],
    [-29.126496, 332.3968411, 4],
    [-59.2887665, 155.5966061, 3],
    [-22.3873765, 156.3330305, 3],
    [-34.8518186, 237.027296, 3],
    [57.2535273, 288.5494132, 1],
    [-63.4058594, 319.8484854, 2],
    [-51.2027322, 304.2480178, 1],
    [-71.1245061, 339.7798315, 1],
    [-30.2316777, 277.0613564, 1],
    [-58.5735022, 59.1837837, 1],
    [-47.0567134, 137.7145026, 1],
    [-55.2650612, 298.9476785, 2],
    [64.172545, 149.6946385, 1],
    [-33.2607205, 98.9340412, 1],
    [10.9345051, 150.0952987, 2],
    [84.0530699, 359.5706503, 1],
    [-82.4193724, 262.7573758, 3],
    [22.0191263, 336.6020817, 2],
    [35.8220203, 133.608452, 1],
    [-30.1906647, 315.6974902, 3],
    [79.5588399, 66.5531327, 4],
    [27.6713512, 276.4411863, 4],
    [6.6545101, 288.3114918, 1],
    [-60.3580098, 123.06534, 4],
    [40.6976977, 33.6739724, 4],
    [-44.2723583, 68.3294556, 1],
    [-56.2460509, 19.6733473, 4],
    [-33.1253758, 49.417063, 2],
    [74.2740075, 17.9794074, 2],
    [-64.1466059, 50.6104653, 4],
    [55.1393991, 146.4743382, 4],
    [-49.2001991, 291.4771208, 4],
    [-68.0704263, 63.7157611, 1],
    [-51.5297375, 200.0075867, 3],
    [-34.5191614, 23.0516722, 4],
    [1.4213403, 261.323758, 4],
    [24.5204509, 173.6800329, 1],
    [-51.5350979, 334.6862037, 2],
    [-36.1773603, 287.1299141, 3],
    [72.7840711, 267.1617506, 3],
    [14.4647367, 227.8975384, 1],
    [32.664804, 184.9191314, 1],
    [83.5095328, 99.5116515, 1],
    [-79.3906778, 196.743059, 3],
    [-50.3676351, 39.7145256, 3],
    [5.2131876, 84.5180379, 2],
    [48.7271041, 14.0870292, 4],
    [19.0376171, 345.4380401, 2],
    [48.8294951, 185.3356013, 1],
    [-11.3226803, 29.2421423, 3],
    [2.3136543, 128.9240597, 3],
    [62.7486746, 63.2136303, 1],
    [22.4471611, 231.2145307, 3],
    [2.7438295, 255.5182026, 4],
    [22.1633495, 348.778485, 1],
    [-17.5104579, 352.3708331, 3],
    [23.0820813, 146.4753227, 1],
    [85.722939, 43.2743291, 3],
    [87.3386775, 99.4693662, 2],
    [65.4254034, 308.5236595, 4],
    [-2.3574833, 239.0455972, 4],
    [86.0656634, 298.2392357, 3],
    [-35.3615946, 37.6786828, 3],
    [-2.749761, 349.2834475, 4],
    [-87.6392016, 94.8576989, 3],
    [46.5389914, 24.605958, 1],
    [21.7692274, 217.4884866, 4],
    [-10.873822, 18.9618761, 2],
    [56.9935029, 273.5255144, 1],
    [43.1226104, 164.8655167, 2],
    [-2.3837622, 261.7223054, 4],
    [-45.5549326, 148.2617679, 4],
    [16.5852146, 212.3728459, 3],
    [-43.2040267, 18.8265308, 2],
    [-54.1622057, 8.3302675, 2],
    [-8.5712624, 353.4696053, 3],
    [42.1452047, 165.7749974, 4],
    [-44.4277025, 228.8968488, 2],
    [0.0752835, 62.3832453, 3],
    [-1.703482, 170.7107885, 3],
    [-72.0433189, 89.5358586, 3],
    [-37.5968703, 239.2552891, 1],
    [-73.9300557, 114.1127729, 2],
    [-18.2693963, 205.2574686, 4],
    [85.299645, 121.4914222, 1],
    [88.0818702, 257.0534405, 3],
    [-21.1270229, 121.7336974, 3],
    [8.7429603, 78.1581589, 2],
    [80.4700166, 259.5384023, 3],
    [24.2088811, 227.4018744, 4],
    [28.9763961, 212.7170213, 3],
    [49.6904703, 267.9538651, 3],
    [-38.6811134, 194.2178215, 1],
    [79.1277285, 128.2445558, 3],
    [5.6150971, 190.1031144, 3],
    [-38.3048762, 310.4860021, 2],
    [2.6940341, 333.7525529, 4],
    [78.4017845, 196.4919212, 2],
    [60.8783807, 47.2441518, 1],
    [68.4203376, 257.9824272, 2],
    [41.4245998, 338.9592934, 2],
    [-51.0041201, 224.7924546, 2],
    [72.8276837, 104.2956959, 3],
    [-14.1768967, 22.6158662, 4],
    [28.6969856, 257.3471327, 4],
    [83.0810755, 197.3452458, 1],
    [9.6261908, 158.4755941, 2],
    [68.5484433, 41.3679273, 3],
    [63.8739621, 342.4412963, 3],
    [83.9838592, 119.0067446, 2],
    [81.4048932, 102.9817577, 4],
    [37.6116308, 194.1796499, 1],
    [27.2960473, 188.9422907, 2],
    [49.8251028, 244.0363988, 3],
    [4.8310792, 102.9824709, 2],
    [13.9204399, 116.5604619, 3],
    [9.6050632, 20.9821807, 1],
    [48.0802902, 125.5514886, 4],
    [32.5213819, 158.1811564, 1],
    [-59.7553831, 197.2308839, 1],
    [-39.8370073, 240.8380692, 1],
    [-73.6807599, 353.3742098, 2],
    [22.1117024, 284.8242134, 4],
    [14.4751657, 349.9978358, 4],
    [-30.2831164, 22.8476392, 3],
    [-58.1688798, 138.2625443, 4],
    [-77.0491033, 131.3632128, 4],
    [-63.8511504, 213.655221, 1],
    [2.2596243, 235.7522759, 1],
    [-22.7903868, 131.276022, 4],
    [40.2396632, 209.5063994, 1],
    [41.6539981, 269.4665263, 1],
    [38.1065312, 29.9855403, 1],
    [72.2310934, 317.4892232, 4],
    [8.4985111, 96.3656354, 3],
    [-42.7698076, 281.3549731, 1],
    [12.7203727, 234.6446756, 3],
    [-26.2897187, 131.7236154, 1],
    [9.7772947, 1.709089, 4],
    [-11.4540705, 307.4480788, 2],
    [-0.2553274, 151.5821591, 2],
    [-67.9281181, 44.9857648, 3],
    [-12.3125848, 324.4393609, 3],
    [51.4645903, 27.0359069, 3],
    [-27.0851185, 302.1436881, 4],
    [60.0715438, 304.6064118, 1],
    [-18.7760909, 93.3771867, 2],
    [18.1671292, 197.8427992, 2],
    [10.5964265, 124.0049413, 2],
    [-38.2406756, 64.3498497, 3],
    [36.4534783, 7.4368457, 4],
    [62.4195348, 358.8551398, 1],
    [23.7575997, 229.4018793, 2],
    [75.280875, 251.6434817, 1],
    [84.4944839, 29.8238035, 4],
    [-21.9329317, 166.0243303, 2],
    [-74.4935904, 341.0859883, 4],
    [-19.7754058, 300.2207891, 3],
    [-65.0616474, 244.2756869, 2],
    [10.3636577, 285.7701051, 1],
    [74.8682906, 97.6082771, 1],
    [45.7036119, 83.6065497, 4],
    [-78.3855217, 288.0441904, 1],
    [43.1160257, 342.9997006, 1],
    [-69.376817, 78.4484863, 1],
    [-12.6757879, 144.6962998, 1],
    [-12.7498233, 347.3896578, 4],
    [2.6042677, 104.50951, 4],
    [-68.5081126, 285.9637378, 2],
    [20.0675189, 41.8659348, 4],
    [55.987791, 63.0636313, 4],
    [83.2262024, 165.1471923, 4],
    [-32.0199342, 1.9800974, 2],
    [-53.2303636, 2.8513068, 1],
    [-81.4015631, 214.0973852, 3],
    [43.2134475, 134.3629797, 1],
    [-71.7579009, 242.4772441, 4],
    [43.5071846, 16.7549398, 3],
    [15.3353068, 130.7493343, 1],
    [-15.1757624, 285.9594711, 4],
    [53.469901, 49.8648445, 3],
    [-75.2755818, 187.7373458, 3],
    [-2.3401429, 93.5902831, 2],
    [-25.6106461, 57.092258, 1],
    [57.7578714, 323.2730129, 2],
    [-51.8403481, 279.1753664, 2],
    [73.9252091, 154.9764425, 4],
    [24.7055103, 2.352891, 4],
    [1.4876282, 195.854643, 1],
    [2.3568711, 155.7082331, 2],
    [-29.8790515, 49.2090098, 3],
    [67.3394805, 88.3908617, 3],
    [-21.7984858, 221.0728727, 2],
    [-19.2072425, 132.1385067, 4],
    [59.564788, 209.948241, 3],
    [34.0522437, 142.7252507, 3],
    [26.0917426, 98.0476768, 2],
    [-10.0380841, 132.0141851, 4],
    [68.4369536, 343.3036091, 3],
    [-27.1314878, 138.842235, 3],
    [-1.882294, 282.1828971, 1],
    [76.5989764, 212.1869089, 4],
    [34.9949942, 237.2055882, 1],
    [64.1443283, 47.8570394, 4],
    [-15.0157644, 89.6449059, 4],
    [-14.600345, 269.1607519, 1],
    [12.3257182, 351.1798828, 4],
    [89.124162, 266.6191603, 1],
    [3.6228314, 215.58047, 2],
    [-52.7368226, 226.4778689, 4],
    [-79.3434237, 340.9678228, 1],
    [26.5780374, 257.3666274, 4],
    [56.9170884, 105.4201456, 2],
    [-41.525177, 183.2671755, 3],
    [-69.0211316, 67.3702046, 4],
    [84.0105636, 1.7381642, 4],
    [-38.1871562, 172.6372269, 1],
    [-9.1916044, 50.044459, 1],
    [23.0434958, 341.4439384, 1],
    [-4.404509, 245.9807974, 2],
    [78.359516, 312.1357152, 3],
    [7.995858, 224.0979516, 3],
    [-8.7262046, 290.8392275, 4],
    [-31.6384072, 183.4948579, 4],
    [-8.1599219, 316.2517746, 4],
    [65.5574965, 261.372283, 4],
    [21.7862916, 151.7653119, 2],
    [-63.0968164, 100.2625646, 2],
    [4.788079, 213.8136208, 2],
    [65.0761232, 9.6248268, 3],
    [65.0478705, 274.1561257, 1],
    [-28.1608204, 109.5933509, 2],
    [87.2415703, 54.260175, 2],
    [74.9754792, 65.9306979, 3],
    [8.117932, 286.0296067, 4],
    [3.1481755, 198.3004698, 2],
    [89.6390836, 312.3386157, 2],
    [-45.9879615, 275.8442415, 2],
    [-37.718237, 106.5303603, 3],
    [-22.3174917, 267.9064803, 4],
    [-65.1304864, 218.8103047, 3],
    [-25.4078734, 318.6118947, 4],
    [64.8317997, 143.2456843, 3],
    [55.1837903, 133.8441712, 1],
    [-10.3029201, 275.1569444, 1],
    [-22.5024337, 189.426648, 2],
    [-79.631293, 7.9881023, 1],
    [28.0483855, 132.573131, 4],
    [29.1022091, 51.1850138, 1],
    [-18.4514888, 295.248716, 2],
    [56.9893335, 41.5350897, 1],
    [5.2342682, 163.915114, 4],
    [78.7186991, 67.1117499, 4],
    [51.2271901, 39.6050336, 1],
    [-6.2350533, 79.6277181, 3],
    [25.2004949, 170.4033322, 2],
    [-8.7577454, 89.0401223, 1],
    [-53.819765, 263.3529142, 3],
    [26.8563938, 130.0511012, 4],
    [-13.5536105, 30.3137552, 1],
    [-32.653589, 224.9802157, 3],
    [32.0125661, 299.4742153, 3],
    [-10.1710526, 2.2895675, 4],
    [1.2174291, 184.0412437, 1],
    [-7.5749918, 76.8024373, 4],
    [16.3368716, 205.9665622, 1],
    [-74.7044621, 37.3331824, 3],
    [35.6395414, 176.4869238, 3],
    [7.5840743, 114.6348812, 4],
    [33.5359422, 64.2526528, 4],
    [-24.6328779, 241.2899849, 2],
    [-6.9362432, 232.653208, 4],
    [-24.7303488, 282.855607, 3],
    [3.6286175, 274.1082374, 4],
    [77.4030776, 336.5693781, 1],
    [-2.8785336, 157.6981408, 4],
    [-83.6718427, 84.5220624, 3],
    [-4.1267398, 292.5581102, 4],
    [44.6073795, 172.0132891, 3],
    [-72.8699141, 117.9814462, 2],
    [14.8037922, 284.6751221, 1],
    [-14.8745947, 206.7769858, 2],
    [-38.1789583, 238.0096873, 3],
    [12.3999614, 125.8831526, 1],
    [63.0261761, 312.7361818, 2],
    [-73.9544103, 307.8111934, 3],
    [52.6955045, 349.3074546, 1],
    [76.1184985, 336.7919483, 3],
    [31.0667813, 273.9920657, 3],
    [-53.1771227, 258.3851343, 4],
    [76.3641588, 73.1142379, 1],
    [-67.259178, 300.7820593, 1],
    [7.5930176, 165.3837588, 3],
    [17.2931133, 224.2064773, 3],
    [32.5805042, 92.9640477, 2],
    [42.8837941, 214.0011188, 2],
    [-23.9370481, 303.295397, 3],
    [35.7535189, 260.0725945, 1],
    [-68.4972765, 182.81592, 1],
    [70.4662963, 96.4646246, 1],
    [25.9614188, 12.3123914, 1],
    [-21.8698457, 33.604101, 1],
    [-23.697224, 204.3220929, 1],
    [-48.1862782, 127.7997667, 2],
    [-22.7596078, 105.3824877, 1],
    [7.6501708, 44.4497223, 4],
    [86.5062454, 39.969989, 1],
    [-76.3659008, 27.2847653, 1],
    [-6.7914549, 284.7349667, 4],
    [83.6183162, 102.7926125, 4],
    [77.5961859, 259.551216, 3],
    [45.4600911, 67.4757252, 2],
    [28.399464, 101.5293181, 3],
    [-72.2411198, 342.5887068, 1],
    [19.3466308, 241.644373, 2],
    [46.0804412, 316.3716385, 1],
    [49.4525764, 307.851168, 4],
    [-15.1780113, 283.7051205, 4],
    [81.2179306, 310.0697972, 1],
    [27.3975913, 140.4894285, 2],
    [74.9720104, 27.1470283, 4],
    [-29.4045956, 14.7805434, 3],
    [1.1195372, 86.3402225, 4],
    [-24.7041402, 70.5841783, 4],
    [-34.942132, 313.8826326, 3],
    [-42.5641458, 280.1728277, 3],
    [10.178037, 304.1425037, 3],
    [55.5346146, 256.7879451, 3],
    [51.601667, 72.3426746, 1],
    [-16.1365898, 109.3613043, 1],
    [74.1881979, 250.3857731, 4],
    [-22.9721296, 127.5504867, 2],
    [-26.4737405, 220.4174786, 3],
    [-26.4391287, 243.2573669, 4],
    [19.6734653, 212.363355, 3],
    [-46.8088363, 98.2835116, 1],
    [-53.9725603, 344.3373081, 4],
    [-83.0806907, 215.2955643, 3],
    [86.4339472, 79.1605396, 1],
    [-77.2208141, 330.9151945, 2],
    [40.3844132, 98.1760058, 3],
    [-22.5185065, 10.0695186, 4],
    [8.3404118, 230.6504486, 1],
    [-43.865855, 207.0539956, 1],
    [10.2620067, 128.8195421, 4],
    [66.6750871, 349.5739272, 4],
    [41.3576814, 309.8138741, 2],
    [-73.3318228, 10.1322231, 1],
    [-15.9336202, 40.1283522, 3],
    [55.176782, 133.4700748, 3],
    [-61.8142134, 283.0547317, 1],
    [-3.5564669, 337.0369661, 4],
    [14.2268782, 214.9646711, 2],
    [30.9885989, 359.6206295, 3],
    [10.0919477, 276.1119555, 4],
    [-5.9043701, 31.9826059, 1],
    [34.8076215, 249.8648549, 2],
    [29.066333, 29.3342219, 4],
    [-29.4506625, 185.5178489, 2],
    [-44.160883, 154.6385923, 1],
    [-70.6140581, 232.5054042, 4],
    [-6.7864604, 254.9937094, 1],
    [78.0192046, 65.4071871, 3],
    [-48.8278011, 212.3220003, 4],
    [-86.8173458, 45.0589163, 1],
    [-22.9458206, 331.3801665, 2],
    [-76.6132308, 63.5379883, 4],
    [-24.6860713, 260.158917, 2],
    [45.1366434, 172.8843816, 2],
    [-44.2396816, 308.5215759, 1],
    [-42.7567386, 136.2036556, 1],
    [55.5837307, 15.8077789, 2],
    [88.9406709, 120.3865074, 1],
    [-46.8889745, 335.6739018, 1],
    [2.0432518, 91.2465516, 4],
    [-51.6216531, 316.7624569, 2],
    [-82.6342739, 185.2869917, 4],
    [-8.1199224, 95.7592806, 2],
    [-14.9630913, 19.9512224, 1],
    [-44.2695721, 160.255212, 1],
    [-31.3617987, 297.4194981, 3],
    [-55.8258793, 49.1206249, 3],
    [18.4053224, 24.2186312, 1],
    [37.2721837, 43.8293403, 2],
    [70.5498581, 272.0509434, 4],
    [-55.3806393, 154.6622888, 3],
    [28.3184059, 217.5788067, 4],
    [52.126473, 106.7841225, 2],
    [40.7024289, 68.1124368, 4],
    [36.6097341, 349.1884037, 4],
    [1.3980609, 24.5921824, 3],
    [-76.2601027, 288.9020747, 3],
    [83.0888819, 176.2610967, 4],
    [-54.8006728, 217.9619448, 4],
    [-88.6338034, 104.8324737, 2],
    [-84.1360012, 31.9704929, 2],
    [-55.7748108, 288.650609, 3],
    [8.4483338, 317.7121558, 2],
    [-21.7959317, 20.1544662, 2],
    [11.3593011, 79.8616781, 3],
    [-79.9288911, 170.6971954, 2],
    [28.5890797, 18.401235, 1],
    [27.8565336, 157.5481919, 1],
    [-39.7108103, 210.327072, 1],
    [77.0241245, 44.5165944, 3],
    [-68.1654334, 327.6966111, 4],
    [-43.3766973, 340.2897758, 3],
    [35.0559336, 121.1236797, 1],
    [64.9007388, 176.4765455, 3],
    [-51.8161155, 352.7677119, 2],
    [34.4553369, 297.7210053, 3],
    [3.2185929, 349.9258164, 4],
    [53.912699, 104.6392961, 4],
    [-26.3699579, 346.9858949, 1],
    [-0.367623, 75.095813, 3],
    [-52.5538392, 27.1872868, 3],
    [-36.2731248, 77.4435698, 3],
    [88.6223411, 284.1837596, 1],
    [61.5742084, 93.1852465, 3],
    [44.8792227, 221.31295, 4],
    [-10.9524458, 32.5771026, 3],
    [14.1580313, 30.0749484, 1],
    [44.0036494, 226.2191827, 1],
    [20.3819814, 324.5569642, 3],
    [-34.3034982, 94.8200249, 3],
    [13.2625207, 156.9477841, 3],
    [46.5536035, 254.7303756, 2],
    [65.7952965, 278.0680632, 4],
    [-19.7946284, 49.7780045, 2],
    [45.5119695, 175.0722398, 4],
    [63.8745416, 112.5171355, 4],
    [-87.6050511, 241.2119282, 3],
    [-61.1914843, 235.5219981, 1],
    [-83.7669633, 164.8229613, 1],
    [73.3403426, 73.626077, 3],
    [25.0495194, 133.0509292, 4],
    [49.6560874, 18.1223862, 1],
    [-23.135485, 310.4260639, 1],
    [15.6649861, 144.3385495, 2],
    [-4.4391128, 2.7343187, 2],
    [35.0093029, 236.4167444, 2],
    [39.9612948, 106.5175021, 3],
    [37.1309234, 201.4817355, 1],
    [-77.6063575, 289.6556501, 1],
    [1.1978813, 163.3857498, 1],
    [18.3440326, 275.1160815, 3],
    [-41.7914302, 106.3408637, 4],
    [37.4887851, 172.9809039, 4],
    [-29.8946607, 11.0902546, 3],
    [46.3717136, 277.1063838, 4],
    [-32.3289815, 194.9954389, 4],
    [-33.1177921, 289.4326367, 1],
    [-8.8862314, 230.5210576, 1],
    [-50.9621915, 357.8142734, 3],
    [-70.3019504, 262.7768827, 1],
    [32.5326213, 321.623783, 2],
    [84.3948565, 123.916763, 2],
    [-61.7161898, 157.5775158, 3],
    [68.3551148, 130.5074099, 3],
    [52.3304394, 37.3531928, 1],
    [-64.4529648, 33.6429766, 1],
    [-9.776192, 312.0338054, 3],
    [63.1854101, 170.0039508, 3],
    [39.3256788, 352.9844122, 3],
    [85.3475799, 202.0096477, 3],
    [26.2053697, 146.1569741, 1],
    [-87.1617843, 91.3598732, 2],
    [69.950011, 110.5093194, 2],
    [38.422741, 170.4599492, 4],
    [34.3819323, 186.3617626, 2],
    [-69.5104778, 55.9835095, 2],
    [48.0508451, 26.9233926, 3],
    [-69.5517909, 289.7677627, 4],
    [33.0066791, 152.3194786, 4],
    [32.150205, 100.317409, 3],
    [-3.0765833, 123.3959054, 1],
    [-66.1356292, 8.0296801, 4],
    [61.1218596, 292.4853161, 2],
    [78.2938617, 279.7035618, 4],
    [15.3227663, 283.9308632, 2],
    [-25.1784349, 244.0999686, 1],
    [51.8792496, 231.5173947, 2],
    [5.9904946, 325.5227586, 2],
    [21.2810544, 8.1033131, 2],
    [79.0860216, 254.2571518, 2],
    [16.471177, 42.3841732, 1],
    [35.0140842, 104.0044678, 3],
    [-13.6121325, 230.5942425, 2],
    [80.1849409, 329.4797367, 2],
    [73.2166944, 96.5843689, 1],
    [4.0334178, 79.3345754, 3],
    [-20.5601646, 188.8819903, 1],
    [-54.4995349, 11.1223308, 3],
    [77.3788616, 189.199197, 4],
    [-55.5727467, 223.0226464, 3],
    [-5.7938231, 169.1999944, 2],
    [-51.7443179, 116.4930386, 3],
    [-66.4169477, 8.8960803, 2],
    [-21.1241301, 343.6306657, 4],
    [68.7685125, 218.7959259, 2],
    [-53.2995738, 205.2241317, 1],
    [26.8525608, 163.0652584, 1],
    [-87.975655, 276.2111766, 3],
    [75.2771734, 123.6988501, 4],
    [69.6394865, 138.2405588, 2],
    [9.3496574, 324.4485469, 1],
    [79.4663436, 81.1109809, 2],
    [50.1495783, 242.8126213, 4],
    [-18.3563696, 8.8128592, 1],
    [-38.785551, 191.0309524, 1],
    [81.6485745, 171.6051848, 1],
    [31.7491962, 92.1824148, 3],
    [54.6292818, 89.2259979, 2],
    [63.0478277, 186.4109089, 4],
    [-57.1884625, 352.2465285, 2],
    [-45.1885335, 134.2529335, 1],
    [44.8538513, 229.8690043, 1],
    [-3.1808, 296.8889753, 3],
    [19.9293396, 242.0007288, 2],
    [-56.3344622, 1.5799891, 3],
    [0.2308893, 113.8912472, 4],
    [57.7299642, 48.6032218, 3],
    [54.6700558, 31.8485699, 4],
    [-71.6374481, 4.0453246, 3],
    [8.9375946, 106.88334, 2],
    [-13.6423532, 335.3167624, 3],
    [8.925016, 187.4167825, 3],
    [46.7040816, 210.3715281, 3],
    [-28.1112155, 106.2083842, 3],
    [-77.3378506, 287.4736438, 3],
    [78.0195919, 229.7475926, 3],
    [-41.7612544, 194.726286, 2],
    [-49.1909216, 43.5176372, 3],
    [-37.7235755, 186.8691769, 1],
    [31.8458262, 122.4877206, 2],
    [71.4237018, 181.2412013, 2],
    [-51.6921382, 331.4309407, 3],
    [81.135075, 163.4149822, 3],
    [-45.3664564, 7.4881087, 4],
    [8.016061, 313.963701, 1],
    [40.4122705, 343.8635042, 1],
    [-52.8060246, 50.5033869, 3],
    [46.8178602, 174.7071305, 4],
    [-21.6970348, 357.9552727, 1],
    [-46.7870216, 247.3752698, 1],
    [-3.8678103, 277.53862, 1],
    [-28.6902902, 284.5293168, 1],
    [-78.8151507, 293.9027677, 3],
    [-6.2935118, 36.0192719, 4],
    [-30.5403701, 297.9755826, 4],
    [-29.8664757, 358.5227876, 2],
    [59.2894865, 186.86981, 3],
    [43.0398347, 18.5706343, 3],
    [-56.1040946, 58.5293003, 3],
    [-50.9462724, 220.9155823, 1],
    [13.797115, 76.7147186, 4],
    [57.3136799, 104.5949265, 3],
    [8.8463413, 36.2718856, 1],
    [-15.0560682, 304.20686, 4],
    [-20.7934856, 295.0774681, 1],
    [15.8531065, 87.4571647, 2],
    [-66.8327868, 195.4010227, 3],
    [9.1758488, 351.2325238, 4],
    [-3.9121988, 157.8062807, 3],
    [53.5492757, 41.2793017, 2],
    [54.8306321, 273.6221609, 1],
    [-70.1132472, 180.0132436, 1],
    [24.0013553, 243.2155072, 1],
    [3.9927159, 101.3070746, 4],
    [36.9122859, 207.7233097, 1],
    [-29.2013197, 56.9588929, 2],
    [-72.5656969, 301.2822209, 1],
    [-25.3940031, 197.7239494, 3],
    [3.9232278, 266.358144, 1],
    [-74.4211144, 226.0699515, 2],
    [-47.722854, 66.1404959, 3],
    [-3.1973435, 321.0080714, 3],
    [35.4967394, 140.7241111, 1],
    [39.9924837, 208.7697232, 3],
    [-65.8533994, 79.7404235, 1],
    [73.6935846, 119.5185301, 3],
    [-67.4446422, 67.2469563, 2],
    [-80.0023285, 182.2918857, 1],
    [40.199449, 279.4447815, 4],
    [-33.4440272, 232.4811849, 3],
    [47.9676564, 101.0831965, 4],
    [34.736755, 206.5226176, 3],
    [59.5791966, 215.5119227, 3],
    [-78.7676975, 273.786009, 1],
    [-13.3505881, 244.8468415, 3],
    [-27.608658, 256.964566, 2],
    [15.8385361, 214.0791783, 4],
    [-46.331719, 249.8186002, 3],
    [-18.2903818, 337.4891082, 3],
    [-87.3857831, 95.5474081, 3],
    [14.8083781, 141.3928535, 3],
    [-46.9502909, 250.1232887, 1],
    [4.2775659, 155.5577742, 4],
    [-63.5192657, 292.7520882, 1],
    [-28.651967, 75.8329333, 4],
    [29.6854534, 274.9663165, 1],
    [63.6434771, 343.0354011, 4],
    [-30.628933, 266.2383431, 1],
    [-8.516928, 50.8391081, 1],
    [24.4648472, 118.0798082, 2],
    [15.690251, 297.042812, 4],
    [47.7981621, 53.1559849, 2],
    [-41.9971019, 233.1273377, 2],
    [-53.9027671, 342.4107459, 1],
    [69.0498918, 278.4217083, 1],
    [13.3286977, 62.7712327, 3],
    [63.2091608, 166.4191919, 4],
    [82.8831854, 79.7755119, 4],
    [-81.1313558, 160.668206, 4],
    [-3.6534307, 107.5373106, 2],
    [58.9357463, 52.5701246, 2],
    [-89.7666386, 69.6390071, 1],
    [7.5034798, 253.7324246, 2],
    [4.301432, 278.9964806, 3],
    [59.6497047, 1.5743707, 2],
    [26.1596894, 4.4986818, 1],
    [-82.9257911, 335.6718886, 3],
    [-3.9021195, 240.5668667, 3],
    [52.3969934, 73.2838511, 4],
    [-81.2745604, 69.8271959, 2],
    [-44.7052343, 198.4258611, 1],
    [44.5260035, 277.7003596, 3],
    [9.2222893, 81.733396, 1],
    [10.7148787, 333.0718816, 4],
    [-28.5306907, 194.4121353, 4],
    [85.2256152, 0.0302125, 2],
    [-74.8041603, 16.3510248, 1],
    [85.819268, 42.0958681, 3],
    [77.1822473, 215.5114565, 4],
    [-38.464035, 290.5357802, 4],
    [26.7477314, 65.4326502, 3],
    [-38.6173765, 14.1940765, 4],
    [76.3176445, 179.1718816, 2],
    [-9.5531859, 146.1728967, 4],
    [72.2887836, 82.9611594, 4],
    [-12.8882173, 132.2870606, 1],
    [88.2936151, 251.2677684, 1],
    [67.2591909, 111.6492251, 4],
    [6.3968807, 324.3624367, 4],
    [-10.3917703, 40.8094288, 3],
    [-31.4842217, 94.6166909, 2],
    [6.0232108, 79.9887936, 2],
    [-41.0648539, 41.1492592, 1],
    [-57.2620909, 30.228589, 3],
    [-67.9620758, 235.6878532, 2],
    [-42.7646957, 78.2057549, 3],
    [-10.3254772, 349.3803912, 3],
    [-76.1009772, 328.4072029, 2],
    [44.5092026, 172.1512443, 4],
    [73.7961842, 303.0393162, 1],
    [-50.0741191, 77.3453825, 4],
    [-83.7141692, 103.0839249, 3],
    [49.3110188, 251.5689733, 3],
    [53.8089948, 336.8243711, 2],
    [-12.8249526, 157.4458576, 1],
    [1.7413931, 157.5185749, 2],
    [47.8547281, 297.2638331, 4],
    [-31.4339178, 238.5557657, 1],
    [-26.3308636, 28.277153, 2],
    [79.5756842, 307.3123768, 2],
    [42.1172954, 293.8839427, 2],
    [7.248041, 68.9730612, 3],
    [-46.2306727, 106.8215272, 4],
    [-21.1816215, 100.9693296, 3],
    [-58.5448814, 306.5086562, 3],
    [9.0286537, 277.7621786, 1],
    [-48.8487392, 121.7119212, 4],
    [5.3972068, 37.4348558, 4],
    [-50.7762123, 254.3160001, 3],
    [-37.5964273, 294.0701912, 1],
  ],
];

// Runner
console.time("timer");
display(tests[1], maxWeight, n);
console.timeEnd("timer");

// generateTests();
// Test case generator
function generateTests() {
  const coordinates = [];
  let size = 1000;
  for (let i = 0; i < size; i++) {
    let x = (Math.random() * 180 - 90).toFixed(7);
    let y = (Math.random() * 360).toFixed(7);
    let z = Math.floor(Math.random() * 4) + 1;
    coordinates.push([x, y, z]);
  }
  console.log("[" + coordinates.join("], [") + "]");
}

// Display
function display(coor, max, n) {
  const parent = document.createElement("div");

  const { groups, travels } = kMeanCluster(coor, max, n);
  visualiseCoordinates(coor, groups, parent);

  // display info below the map
  const ul = document.createElement("ul");
  addLi(ul, `NumJobs: ${coor.length}`);
  addLi(ul, `MaxCap: ${max}, Num Technicians: ${n}`);
  addLi(
    ul,
    `Coordinates: ${coor
      .map((element) => `[${element[0]}, ${element[1]}]`)
      .join(", ")}`
  );
  addLi(ul, "");

  const weights = groups.map((group) =>
    group.reduce((sum, coor) => sum + coor.coor[2], 0)
  );
  groups
    .map((group) =>
      group
        .map((element) => `[${element.coor[0]}, ${element.coor[1]}]`)
        .join(", ")
    )
    .forEach((group, i) => {
      addLi(
        ul,
        i === groups.length - 1
          ? `overflow: ${group ? group : "None Assigned"}`
          : `${colors[i + 3]}: t: ${travels[i]}, w: ${weights[i]}, ${group}`
      );
    });
  const totalTravel = travels.reduce((total, travel) => total + travel, 0);

  addLi(ul, "");
  addLi(ul, `Total Travel: ${totalTravel}`);

  parent.appendChild(ul);
  document.body.appendChild(parent);
}
function visualiseCoordinates(coordinates, groups, parent, startPoints) {
  var mymap = L.map("mapid").setView([-36.9020038, 174.7578935], 10);

  L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
    attribution:
      'Map data © <a href="https://openstreetmap.org">OpenStreetMap</a> contributors',
  }).addTo(mymap);

  coordinates.forEach((coor, i) => {
    let icon = L.icon({
      iconUrl: `./image/"red".jpeg`,
      iconSize: [10, 10],
      className:
        "marker-color-" +
        colors[
          groups
            .map((group) => group.map((el) => el.index))
            .findIndex((group) => group.includes(i)) + 3
        ],
    });

    const marker = L.marker([coor[0], coor[1]], { icon: icon }).addTo(mymap);
  });
}
function addLi(parent, text) {
  const li = document.createElement("li");
  li.textContent = text;
  parent.appendChild(li);
}

// K means clustering with x iterations with randomly chosen coordinates
// RUNTIME: O(number of iterations * number of jobs * number of technicians)

// Iterating multiple times to find the best K-means cluster
function kMeanCluster(coordinates, max, n) {
  let res;
  let minTravel = Number.MAX_SAFE_INTEGER;

  // find the iteration with the lowest total travel within the group
  for (let i = 0; i < numIterations; i++) {
    const cur = getRandomKMean(coordinates, max, n);
    let curTravel = cur.travels.reduce((sum, travel) => sum + travel, 0);
    if (curTravel < minTravel) {
      res = cur;
      minTravel = curTravel;
    }
  }
  return res;
}

// Finding a random K mean cluster
function getRandomKMean(coordinates, max, n) {
  const { groups, technicians, added } = initialSetUp(coordinates, n);

  const startPoints = [];

  // randomly select start points
  for (let i = 0; i < n; i++) {
    const rand = getRandomJob(coordinates, added);
    if (rand === -1) break; // break if the number of jobs is less than the number of technicians

    groups[i].push({ coor: coordinates[rand], index: rand });
    startPoints.push(rand);
    technicians[i].weight += coordinates[rand][2];
  }

  // iterate the rest of jobs and assign it to the cloest available technician
  coordinates.forEach((coor, i) => {
    if (added[i]) return; // don't reassign the jobs that were initially assigned

    const index = getClosestTech(coordinates, i, startPoints, technicians, max);
    if (index === -1) return;
    groups[index].push({ coor, index: i });
    technicians[index].weight += coor[2];
    added[i] = true;
  });

  // add all the unadded jobs to overflow
  added.forEach((el, i) => {
    if (!el) {
      groups[n].push({ coor: coordinates[i], index: n });
    }
  });

  // return values for display
  return {
    groups,
    travels: technicians.map((tech) => tech.travel),
  };
}
function initialSetUp(coordinates, n) {
  const m = coordinates.length;
  const groups = Array.from(Array(n + 1), () => []); // each element represents a cluster
  const technicians = Array.from(Array(n), () => {
    return {
      travel: 0,
      weight: 0,
    };
  });
  const added = [...Array(m)].map(() => false); // used to prevent duplicate jobs from being assigned twice
  return { m, groups, technicians, added };
}
function getRandomJob(coordinates, added) {
  if (added.every((el) => el)) return -1; // if there is no unadded jobs return

  let rand = Math.floor(Math.random() * coordinates.length);
  while (added[rand]) {
    rand = Math.floor(Math.random() * coordinates.length);
  }
  added[rand] = true;
  return rand;
}
function getClosestTech(coordinates, x, startPoints, technicians, max) {
  const inits = startPoints.map((el) => coordinates[el]);
  let minDistance = Number.MAX_SAFE_INTEGER;

  const closest = inits.reduce((minIndex, init, i) => {
    if (technicians[i].weight + coordinates[x][2] > max) return minIndex;

    let curDistance = getDistance(init, coordinates[x]);
    if (curDistance < minDistance) {
      minDistance = curDistance;
      return i;
    }

    return minIndex;
  }, -1);

  if (closest !== -1) {
    technicians[closest].travel += minDistance;
  }

  return closest;
}
function getDistance(a, b) {
  return Math.sqrt((a[0] - b[0]) ** 2 + (a[1] - b[1]) ** 2);
}
